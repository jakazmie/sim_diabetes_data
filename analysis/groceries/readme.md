Each patient has a list of foods they have purchased; from these we will engineer a feature based on the nutrient content of the foods (specifically, the percent of calories derived from carbohydrates). Converting from "food space" to "nutrient space" is essentially a matrix multiplication operation, and we can do it in SQL. This directory includes both a Hive query to perform this transformation, and an R Markdown file that shows a small demonstration of this transformation using SQLite.
